<p-toast *ngIf="verEncabezado"></p-toast>
<p-confirmDialog *ngIf="verEncabezado" [style]="{width: '50vw'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text"></p-confirmDialog>
<app-breadcrumb *ngIf="verEncabezado"></app-breadcrumb>

<div *ngIf="verEncabezado" class="grid">
	<div class="col-12">
		<div class="card" style=" background-image: url('https://nitrofert.com.co/wp-content/uploads/2023/05/Recurso_17@2x.png'); background-size:cover;">
            <div class="field col-12 ">
                <span class="p-float-label">
                    <p-calendar id="rangoFecha" [(ngModel)]="filtroRnagoFechas" selectionMode="range" [readonlyInput]="true" [showIcon]="true" [numberOfMonths]="1"  styleClass="w-full"  (ngModelChange)="cambioFecha($event)"  ></p-calendar>
                    <label for="rangoFecha"><h6>Seleccionar rango de fecha</h6></label>
                </span>
            </div>
            
        </div>
    </div>
</div>


<div class="grid">
	<div class="col-12">
        <div class="w-full flex">
            <div class="flex  col-12 ">
                <div class="card min-w-full" style=" background-image: url('https://nitrofert.com.co/wp-content/uploads/2023/05/Recurso_17@2x.png'); background-size:cover;">
                    <div *ngIf="!verEncabezado" class="text-center mb-3"><h1>Consolidado Novedades</h1></div>
                    <div class="p-fluid p-formgrid grid">
                        <div class="field col-12 ">
                            <app-dynamic-table [dataTable]="tablaNovedades.data" 
                                        [headersTable]="tablaNovedades.header"
                                        
                                        dataKey="index" 
                                        [rows]="10" 
                                        [rowsPerPageOptions]="[10,50,100]" 
                                        [paginator]="false"
                                        [selectionMode]="'multiple'"
                                        [loading]="loading"
                                        [showBtnExp]="true"
                                        class="min-w-full"
                                        nameExport="rpt_novedades">
                            </app-dynamic-table>
                            <!--<p-table #dt1 
                                    [value]="tablaNovedades.data" 
                                    [dataKey]="'index'" 
                                    [rows]="10" 
                                    [rowsPerPageOptions]="[10, 50, 100]"
                                    [loading]="loading" 
                                    [rowHover]="true" 
                                    
                                    [styleClass]="'p-datatable-gridlines p-datatable-sm  shadow-4 '" 
                                    [paginator]="true"
                                    [globalFilterFields]="globalFilterFields" 
                                    [selectionMode]="'single'" 
                                    [(selection)]="selectedNovedad"
                                    responsiveLayout="scroll">
                                <ng-template pTemplate="caption">
                                    <div class="flex justify-content-between flex-column sm:flex-row">
                                        <div>
                                            <button pButton
                                                    
                                                    pTooltip="Exportar a excel" tooltipPosition="bottom" placeholder="Bottom"   
                                                    class="p-button-outlined mb-2 mr-2 p-button-success p-button-sm" 
                                                    icon="pi pi-file-excel" 
                                                    (click)="exportExcel()">
                                            </button>

                                        </div>
                                        <div>
                                            <span class="p-input-icon-left mb-2">
                                                <i class="pi pi-search"></i>
                                                <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Buscar por palabra clave" class="w-min p-inputtext-sm"/>
                                            </span>
                                        </div>
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        
                                        <th *ngFor="let key of objectKeys(tablaNovedades.header[0])">
                                            <div class="flex justify-content-between align-items-center">
                
                                                <div [style]="'text-align:'+tablaNovedades.header[0][key].align+';'">
                                                    {{ tablaNovedades.header[0][key].label }}
                                                </div>
                                                <div class="flex">
                                                    <p-columnFilter *ngIf="tablaNovedades.header[0][key].type!='' && tablaNovedades.header[0][key].field" [type]="tablaNovedades.header[0][key].type" 
                                                                [field]="tablaNovedades.header[0][key].field" 
                                                                display="menu"
                                                                ngClass="ml-1" 
                                                                [placeholder]="'Buscar por '+tablaNovedades.header[0][key].label"
                                                                [currency]="tablaNovedades.header[0][key].currency">
                                                </p-columnFilter>
                                                <p-sortIcon class="mt-1" *ngIf="tablaNovedades.header[0][key].type!='' && tablaNovedades.header[0][key].field" [field]="tablaNovedades.header[0][key].field"></p-sortIcon>
                                                </div>
                                                
                                            </div>
                                        </th>
                
                                        
                                        
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-itemData >
                                    <tr [pSelectableRow]="itemData" [class]="itemData.bgcolor">
                                        <td>
                                            {{ itemData.bgcolor}}
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>-->

                            
                        </div>  
                        
        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>